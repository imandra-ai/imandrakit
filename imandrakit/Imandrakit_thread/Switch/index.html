<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Switch (imandrakit.Imandrakit_thread.Switch)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">imandrakit</a> &#x00BB; <a href="../index.html">Imandrakit_thread</a> &#x00BB; Switch</nav><header class="odoc-preamble"><h1>Module <code><span>Imandrakit_thread.Switch</span></code></h1><p>Switch to cancel tasks.</p><p>A switch can be flipped to false once, and remains off forever afterwards.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : 
  <span><a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Ppx_deriving_runtime.Format.formatter</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../ppx_deriving/Ppx_deriving_runtime/index.html#type-unit">Ppx_deriving_runtime.unit</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show"><a href="#val-show" class="anchor"></a><code><span><span class="keyword">val</span> show : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../ppx_deriving/Ppx_deriving_runtime/index.html#type-string">Ppx_deriving_runtime.string</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span><span class="optlabel">?parent</span>:<a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>New switch.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">parent</span> <p>inherit from this switch. It means that the result switches off if the parent does, but conversely we can turn the result off without affecting the parent. In other words, this switch's lifetime is a subset of the parent's lifetime</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_on_turn_off"><a href="#val-with_on_turn_off" class="anchor"></a><code><span><span class="keyword">val</span> with_on_turn_off : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>with_on_turn_off sw cb f</code> calls <code>f()</code>. Within the context where <code>f()</code> is running, <code>sw</code> turning off will trigger <code>cb()</code>. Once <code>f()</code> has terminated, <code>cb</code> is disabled and will not be called.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-on_turn_off"><a href="#val-on_turn_off" class="anchor"></a><code><span><span class="keyword">val</span> on_turn_off : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>on_turn_off sw f</code> will call <code>f()</code> when <code>sw</code> is turned off. If <code>sw</code> is already off then <code>f()</code> is called immediately. <b>NOTE</b> <code>f</code> really should not fail.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_on"><a href="#val-is_on" class="anchor"></a><code><span><span class="keyword">val</span> is_on : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_off"><a href="#val-is_off" class="anchor"></a><code><span><span class="keyword">val</span> is_off : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-turn_off"><a href="#val-turn_off" class="anchor"></a><code><span><span class="keyword">val</span> turn_off : <span><span class="optlabel">?trace</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-turn_off'"><a href="#val-turn_off'" class="anchor"></a><code><span><span class="keyword">val</span> turn_off' : <span><span class="optlabel">?trace</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>[ `Was_off <span>| `Was_on</span> ]</span></span></code></div><div class="spec-doc"><p>Turn off switch, return previous state</p></div></div></div></body></html>
