<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mvar (imandrakit.Imandrakit_thread.Mvar)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">imandrakit</a> &#x00BB; <a href="../index.html">Imandrakit_thread</a> &#x00BB; Mvar</nav><header class="odoc-preamble"><h1>Module <code><span>Imandrakit_thread.Mvar</span></code></h1><p>MVar.</p><p>A mvar is a thread-safe box containing 0 or 1 element. Trying to take from an empty box, or trying to put into a full box, will both block.</p><p>See for example <a href="https://hackage.haskell.org/package/base-4.16.2.0/docs/Control-Concurrent-MVar.html">haskell</a></p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_empty"><a href="#val-create_empty" class="anchor"></a><code><span><span class="keyword">val</span> create_empty : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_full"><a href="#val-create_full" class="anchor"></a><code><span><span class="keyword">val</span> create_full : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-clear"><a href="#val-clear" class="anchor"></a><code><span><span class="keyword">val</span> clear : <span><span><span class="type-var">_</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Remove content, if any</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-take_block"><a href="#val-take_block" class="anchor"></a><code><span><span class="keyword">val</span> take_block : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_take"><a href="#val-try_take" class="anchor"></a><code><span><span class="keyword">val</span> try_take : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-put_block"><a href="#val-put_block" class="anchor"></a><code><span><span class="keyword">val</span> put_block : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-peek"><a href="#val-peek" class="anchor"></a><code><span><span class="keyword">val</span> peek : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span></span></code></div><div class="spec-doc"><p>Access current content without removing it. Only use with immutable content.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_put"><a href="#val-try_put" class="anchor"></a><code><span><span class="keyword">val</span> try_put : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>try_put mv x</code> tries to put <code>x</code> in <code>m</code>. It returns <code>true</code> on success, <code>false</code> if the attempt failed</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update_block"><a href="#val-update_block" class="anchor"></a><code><span><span class="keyword">val</span> update_block : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p><code>update_block mv f</code> takes <code>x</code> from <code>mv</code>, calls <code>f</code>, and puts the new state back into <code>mv</code>. It returns a secondary value. <code>f</code> is called in a critical section and should not block or take other locks; if it does, beware of deadlocks!</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span><span class="type-var">'a</span> <a href="../../../containers/CCFormat/index.html#type-printer">Imandrakit.Fmt.printer</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <a href="../../../containers/CCFormat/index.html#type-printer">Imandrakit.Fmt.printer</a></span></span></code></div></div></div></body></html>
